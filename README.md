âš ï¸ **é‡è¦æç¤º**: æœ¬ä»“åº“çš„éƒ¨åˆ†å†…å®¹å¯èƒ½å·²è¿‡æ—¶ã€‚CEF é¡¹ç›®ä»åœ¨æ´»è·ƒå¼€å‘ä¸­ï¼Œè¯·è®¿é—® [CEF å®˜æ–¹ç½‘ç«™](https://bitbucket.org/chromiumembedded/cef) è·å–æœ€æ–°ä¿¡æ¯ã€‚

**æœ€åæ›´æ–°**: 2025å¹´7æœˆ4æ—¥  
**CEF å½“å‰ç‰ˆæœ¬**: 138.x  
**çŠ¶æ€**: éƒ¨åˆ†æ–‡æ¡£éœ€è¦æ›´æ–° - æŸ¥çœ‹ [æ›´æ–°è®¡åˆ’](update/README.md)

---

CEFå…¨ç§°æ˜¯Chromium Embedded Frameworkï¼Œå®ƒæ˜¯Chromiumçš„Content APIçš„å°è£…åº“ã€‚

- CEFå®˜ç½‘åœ°å€ï¼šhttps://bitbucket.org/chromiumembedded/cef
- CEFå®˜æ–¹è®ºå›ï¼šhttps://magpcss.org/ceforum
- CEFSharpï¼šhttps://github.com/cefsharp/CefSharp
- âš ï¸ ChromiumFXï¼ˆå·²ä¸æ´»è·ƒï¼‰: https://bitbucket.org/chromiumfx/chromiumfx

## CEF æ–‡æ¡£ä¸­æ–‡ç¿»è¯‘ä»»åŠ¡
--------------------
- [x] [CEF General Usage](https://github.com/fanfeilong/cefutil/blob/master/doc/CEF%20General%20Usage.md)
- [x] [CEF General Usage Task List](https://github.com/fanfeilong/cefutil/blob/master/doc/CEF%20General%20Usage%20Task%20List.md)
- [x] [CEF General Usageä¸­æ–‡ç‰ˆï¼Œæ¬¢è¿æŸ¥é˜…](https://github.com/fanfeilong/cefutil/blob/master/doc/CEF%20General%20Usage-zh-cn.md)

## CEF FAQ
-------
- [CEF çš„å…³é—­æµç¨‹](https://github.com/fanfeilong/cefutil/blob/master/doc/CEF_Close.md)
- [CEF çš„Cå’ŒC++å°è£…](https://github.com/fanfeilong/cefutil/blob/master/doc/CEF_cpp2c_annotation.md)
- [CEF çš„JavaScriptå’ŒC++è·¨è¯­è¨€äº¤äº’](https://github.com/fanfeilong/cefutil/blob/master/doc/CEF_JavaScript_Cpp.md)
- [Cefç»å…¸Nå¤§é—®é¢˜ by æ‰«åœ°åƒ§](http://blog.csdn.net/weolar/article/details/51994895)

## Chromium Documentations
-----------------
- [Chromium Resoures](https://github.com/fanfeilong/cefutil/blob/master/doc/chromium_resources.md)
- [Chromium Content Register V8 Extension](https://github.com/fanfeilong/cefutil/blob/master/doc/content_register_v8_extension.md)

### æ„å»ºç³»ç»Ÿæ–‡æ¡£ï¼ˆå·²è¿‡æ—¶ï¼‰
**âš ï¸ æ³¨æ„ï¼šä»¥ä¸‹ GYP æ„å»ºç³»ç»Ÿæ–‡æ¡£å·²è¿‡æ—¶ï¼ŒChromium å·²è¿ç§»åˆ° GN æ„å»ºç³»ç»Ÿ**
- [Chromium Generation Your Project (GYP)](https://github.com/fanfeilong/cefutil/blob/master/doc/gyp.md) - ä»…ä¾›å†å²å‚è€ƒ
- [Chromium GYP ä¸­æ–‡ç¿»è¯‘](https://github.com/fanfeilong/cefutil/blob/master/doc/gyp.pdf) - ä»…ä¾›å†å²å‚è€ƒ

**æ¨èä½¿ç”¨æœ€æ–°çš„ GN æ„å»ºç³»ç»Ÿï¼š**
- [GN å®˜æ–¹æ–‡æ¡£](https://gn.googlesource.com/gn/)
- [Chromium GN å¿«é€Ÿå¼€å§‹](https://chromium.googlesource.com/chromium/src/+/main/tools/gn/docs/quick_start.md)

### ğŸ”§ ç°ä»£å¼€å‘ç¯å¢ƒé…ç½®è¦æ±‚ (2025å¹´)

**âš ï¸ é‡è¦ï¼šä»¥ä¸‹ä¿¡æ¯åŸºäº 2025å¹´7æœˆçš„æœ€æ–°è¦æ±‚ï¼Œæ›¿ä»£äº†æœ¬ä»“åº“ä¸­çš„è¿‡æ—¶æŒ‡å—**

#### æ“ä½œç³»ç»Ÿè¦æ±‚
- **Windows**: Windows 10 64ä½ (ç‰ˆæœ¬ 1903 æˆ–æ›´æ–°) æˆ– Windows 11
- **macOS**: macOS 12.0 (Monterey) æˆ–æ›´æ–°ç‰ˆæœ¬
- **Linux**: Ubuntu 20.04 LTS æˆ–æ›´æ–°ç‰ˆæœ¬

#### ç¼–è¯‘å™¨è¦æ±‚
- **æ¨è**: Visual Studio 2022 Community/Professional/Enterprise
- **æœ€ä½**: Visual Studio 2019 (ç‰ˆæœ¬ 16.11 æˆ–æ›´æ–°)
- **å¿…é¡»ç»„ä»¶**: 
  - MSVC v143 å·¥å…·é›† (VS 2022) æˆ– MSVC v142 (VS 2019)
  - Windows SDK 10.0.22000 æˆ–æ›´æ–°ç‰ˆæœ¬
  - CMake 3.21 æˆ–æ›´æ–°ç‰ˆæœ¬

#### ä¾èµ–å·¥å…·
- **depot_tools**: [å®˜æ–¹ç‰ˆæœ¬](https://chromium.googlesource.com/chromium/tools/depot_tools.git)
- **Python**: 3.8 - 3.11 (depot_tools ä¼šè‡ªåŠ¨ç®¡ç†)
- **Git**: 2.30 æˆ–æ›´æ–°ç‰ˆæœ¬
- **Ninja**: åŒ…å«åœ¨ depot_tools ä¸­

#### Visual C++ è¿è¡Œæ—¶è¦æ±‚
- **CEF 126.x+**: Visual C++ 2019 Redistributable (x64)
- **CefSharp**: Visual C++ 2019 Redistributable æˆ–æ›´æ–°ç‰ˆæœ¬

#### æ„å»ºç³»ç»Ÿç°çŠ¶
- **å½“å‰ä¸»æµ**: GN (Generate Ninja) - Chromium å®˜æ–¹æ„å»ºç³»ç»Ÿ
- **CEF**: ä½¿ç”¨ GN + Ninja æ„å»ºç®¡é“
- **CefSharp**: æ”¯æŒ .NET Framework 4.6.2+ å’Œ .NET 6+

#### å¿«é€Ÿç¯å¢ƒæ£€æŸ¥
```cmd
# æ£€æŸ¥ Python ç‰ˆæœ¬
python --version

# æ£€æŸ¥ Git ç‰ˆæœ¬  
git --version

# æ£€æŸ¥ Visual Studio ç‰ˆæœ¬
where cl.exe
cl.exe
```

#### è·å–æœ€æ–°ä¿¡æ¯
- [CEF å®˜æ–¹æ„å»ºæŒ‡å—](https://bitbucket.org/chromiumembedded/cef/wiki/BranchesAndBuilding)
- [Chromium å¼€å‘è€…æ–‡æ¡£](https://chromium.googlesource.com/chromium/src/+/main/docs/)
- [CefSharp æ„å»ºæŒ‡å—](https://github.com/cefsharp/CefSharp/wiki)

---

### ğŸ†• CEF æœ€æ–°ç‰ˆæœ¬ç‰¹æ€§äº®ç‚¹ (2025å¹´)

**âš ï¸ é‡è¦ï¼šCEF ç‰ˆæœ¬è·Ÿéš Chromium å‘å¸ƒå‘¨æœŸï¼Œä»¥ä¸‹ç‰¹æ€§åŸºäº CEF 137.x/138.x ç‰ˆæœ¬**

#### Chromium 137/138 æ ¸å¿ƒæ–°ç‰¹æ€§

##### ğŸ¨ CSS å¢å¼º
- **CSS `if()` å‡½æ•°**: ç®€æ´è¡¨è¾¾æ¡ä»¶å€¼ï¼Œæå‡æ ·å¼é€»è¾‘è¡¨è¾¾èƒ½åŠ›
  ```css
  div {
    color: var(--color);
    background-color: if(style(--color: white): black; else: white);
  }
  ```
- **CSS `reading-flow` å’Œ `reading-order`**: æ§åˆ¶å…ƒç´ çš„é”®ç›˜ç„¦ç‚¹å¯¼èˆªé¡ºåº
- **CSS é”šç‚¹å®šä½å¢å¼º**: `anchor-size()` å‡½æ•°æ”¯æŒæ›´å¤šå±æ€§
- **CSS æ¨ªå‘ä¹¦å†™æ¨¡å¼**: æ”¯æŒ `sideways-rl` å’Œ `sideways-lr`

##### ğŸ” å®‰å…¨ä¸éšç§
- **Document-Isolation-Policy**: æ— éœ€ COOP/COEP å³å¯å¯ç”¨è·¨æºéš”ç¦»
- **Ed25519 åŠ å¯†ç®—æ³•**: Web Cryptography API æ”¯æŒç°ä»£æ¤­åœ†æ›²çº¿ç­¾å
- **HSTS è·Ÿè¸ªé˜²æŠ¤**: é˜²æ­¢ç¬¬ä¸‰æ–¹åˆ©ç”¨ HSTS ç¼“å­˜è¿›è¡Œç”¨æˆ·è·Ÿè¸ª
- **:visited é“¾æ¥å†å²åˆ†åŒº**: å¢å¼ºç”¨æˆ·æµè§ˆå†å²éšç§ä¿æŠ¤

##### ğŸ“± ç§»åŠ¨ä¸è®¾å¤‡æ”¯æŒ
- **Device Posture API**: æ£€æµ‹å¯æŠ˜å è®¾å¤‡çš„ç‰©ç†å§¿æ€
- **File System Access for Android**: Android å¹³å°æ–‡ä»¶ç³»ç»Ÿè®¿é—®
- **Capture All Screens**: ä¼ä¸šç¯å¢ƒä¸‹æ•è·æ‰€æœ‰è¿æ¥çš„å±å¹•
- **Element Capture**: ç²¾ç¡®æ•è· DOM å­æ ‘è€Œéæ•´ä¸ªæ ‡ç­¾é¡µ

##### ğŸ® åª’ä½“ä¸å›¾å½¢
- **H265 (HEVC) ç¼–è§£ç å™¨**: WebRTC å’Œ MediaRecorder æ”¯æŒ
- **Float16Array**: é«˜ç²¾åº¦æµ®ç‚¹æ•°ç»„æ”¯æŒ
- **Canvas æµ®ç‚¹é¢œè‰²**: æ”¯æŒåŒ»ç–—å¯è§†åŒ–ç­‰é«˜ç²¾åº¦åº”ç”¨
- **WebGPU å¢å¼º**: 32ä½æµ®ç‚¹çº¹ç†æ··åˆã€çº¹ç†è§†å›¾ç”¨æ³•æ§åˆ¶

##### ğŸ”— API ç°ä»£åŒ–
- **Observable API**: å“åº”å¼ç¼–ç¨‹èŒƒå¼ï¼Œå¤„ç†å¼‚æ­¥äº‹ä»¶æµ
- **fetchLater API**: å»¶è¿Ÿè¯·æ±‚ï¼Œé¡µé¢é”€æ¯æ—¶è‡ªåŠ¨å‘é€
- **WebAuthn æ¡ä»¶åˆ›å»º**: å¯†ç å‡çº§ä¸ºå¯†é’¥æ”¯æŒ
- **FedCM å¤šèº«ä»½æä¾›å•†**: å•ä¸€å¯¹è¯æ¡†æ˜¾ç¤ºå¤šä¸ª IdP

##### âš¡ æ€§èƒ½ä¼˜åŒ–
- **JavaScript Promise Integration (JSPI)**: WebAssembly ä¸ JS Promise é›†æˆ
- **WebAssembly Memory64**: æ”¯æŒå¤§äº 4GB çš„çº¿æ€§å†…å­˜
- **Energy Saver å†»ç»“**: èŠ‚èƒ½æ¨¡å¼ä¸‹å†»ç»“åå°æ ‡ç­¾é¡µ
- **ç¼–è¯‘æç¤ºé­”æ³•æ³¨é‡Š**: ä¼˜åŒ– JavaScript è§£æå’Œç¼–è¯‘

#### å¼€å‘è€…ä½“éªŒæ”¹è¿›

##### ğŸ› ï¸ è°ƒè¯•ä¸ç›‘æ§
- **CSP å“ˆå¸ŒæŠ¥å‘Š**: è„šæœ¬èµ„æº URL å’Œå“ˆå¸Œå€¼æŠ¥å‘Š
- **å“åº”æ—¶é—´ç½®ä¿¡åº¦**: è¯†åˆ«åŒå³°æ€§èƒ½åˆ†å¸ƒ
- **å´©æºƒæŠ¥å‘Šè°ƒç”¨æ ˆ**: æ— å“åº”é¡µé¢çš„ JavaScript è°ƒç”¨æ ˆ

##### ğŸ“ æ–°å¢ Web API
- **Rewriter API**: AI æ”¯æŒçš„æ–‡æœ¬é‡å†™å’Œæ”¹å†™
- **Writer API**: AI æ”¯æŒçš„æ–‡æœ¬ç”Ÿæˆ
- **highlightsFromPoint API**: ç²¾ç¡®çš„é«˜äº®æ£€æµ‹äº¤äº’

#### CEF ç‰¹å®šä¼˜åŠ¿

##### ğŸ”§ åµŒå…¥å¼åº”ç”¨ä¼˜åŠ¿
- **æ”¹è¿›çš„è¿›ç¨‹éš”ç¦»**: æ›´å®‰å…¨çš„å¤šè¿›ç¨‹æ¶æ„
- **ç°ä»£ GPU åŠ é€Ÿ**: WebGPU å…¨é¢æ”¯æŒå’Œä¼˜åŒ–
- **ç§»åŠ¨å¹³å°æ”¯æŒ**: Android WebView åŠŸèƒ½å¯¹ç­‰
- **ä¼ä¸šçº§åŠŸèƒ½**: å±å¹•æ•è·ã€è®¾å¤‡æ§åˆ¶ç­‰ä¼ä¸šéœ€æ±‚

##### ğŸ“Š å…¼å®¹æ€§ä¸ç¨³å®šæ€§
- **é•¿æœŸæ”¯æŒç‰ˆæœ¬**: ä¼ä¸šç¯å¢ƒç¨³å®šæ€§ä¿è¯
- **å‘åå…¼å®¹**: æ¸è¿›å¼ API æ¼”è¿›ï¼Œå‡å°‘ç ´åæ€§å˜æ›´
- **å¤šå¹³å°ä¸€è‡´æ€§**: Windowsã€macOSã€Linux è¡Œä¸ºä¸€è‡´

#### è·å–æœ€æ–°ä¿¡æ¯

- **CEF å‘å¸ƒé¡µé¢**: [Spotify CEF Builds](https://cef-builds.spotifycdn.com/index.html)
- **å®˜æ–¹æ›´æ–°æ—¥å¿—**: [CEF Forum Announcements](https://magpcss.org/ceforum/viewforum.php?f=10)
- **Chromium å‘å¸ƒè¯´æ˜**: [Chrome Release Notes](https://developer.chrome.com/release-notes/)
- **ç‰ˆæœ¬è·Ÿè¸ª**: [CEF ç‰ˆæœ¬åˆ†æ”¯ä¿¡æ¯](https://bitbucket.org/chromiumembedded/cef/wiki/BranchesAndBuilding)

**ğŸ’¡ æç¤º**: CEF é€šå¸¸åœ¨ Chromium ç¨³å®šç‰ˆå‘å¸ƒå 2-4 å‘¨å†…è·Ÿè¿›ç›¸åº”ç‰ˆæœ¬ï¼Œå»ºè®®å…³æ³¨å®˜æ–¹è®ºå›è·å–æœ€æ–°æ„å»ºä¿¡æ¯ã€‚

---

### âš¡ CEF ç°ä»£æ€§èƒ½ä¼˜åŒ–å»ºè®® (2025å¹´)

**åŸºäº CEF 137.x/138.x å’Œç°ä»£ Web æŠ€æœ¯çš„æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ**

#### ğŸ® WebGPU æ¸²æŸ“ä¼˜åŒ–

##### å†…å­˜ç®¡ç†ä¼˜åŒ–
- **32ä½æµ®ç‚¹çº¹ç†æ··åˆ**: é€‚ç”¨äº HDR æ¸²æŸ“å’Œç§‘å­¦å¯è§†åŒ–
  ```javascript
  // è¯·æ±‚ float32-blendable ç‰¹æ€§
  const device = await adapter.requestDevice({
    requiredFeatures: ["float32-blendable"]
  });
  ```

- **çº¹ç†è§†å›¾ç”¨æ³•æ§åˆ¶**: ç²¾ç¡®æ§åˆ¶çº¹ç†ä½¿ç”¨æƒé™
  ```javascript
  const view = texture.createView({
    format: 'rgba8unorm-srgb',
    usage: GPUTextureUsage.RENDER_ATTACHMENT // é™åˆ¶ä½¿ç”¨æƒé™
  });
  ```

##### æ¸²æŸ“ç®¡çº¿ä¼˜åŒ–
- **é›†ç¾¤å¼æ¸²æŸ“**: 1024+ å…‰æºåœºæ™¯æ€§èƒ½æå‡ 10-15 å€
  - è§†é”¥ä½“åˆ‡ç‰‡ï¼š32x18x48 é›†ç¾¤é…ç½®
  - GPU é©±åŠ¨çš„å…‰æºå‰”é™¤å’Œåˆ†ç»„
  - å¯„å­˜å™¨å‹åŠ›ä¼˜åŒ–ï¼ˆç›®æ ‡ >90% å ç”¨ç‡ï¼‰

- **å­ç»„ï¼ˆSubgroupsï¼‰ä¼˜åŒ–**: æœºå™¨å­¦ä¹ å·¥ä½œè´Ÿè½½åŠ é€Ÿ
  ```wgsl
  // WGSL å­ç»„å‡½æ•°ç¤ºä¾‹
  let sum = subgroupAdd(localValue);
  let broadcast = subgroupBroadcast(value, 0);
  ```

##### Apple å¹³å°ç‰¹å®šä¼˜åŒ–
- **Metal ç›´æ¥æ˜ å°„**: è¿‘ä¹ 1:1 çš„ API æ˜ å°„ï¼Œæ¶ˆé™¤è½¬æ¢å¼€é”€
- **åŠç²¾åº¦æµ®ç‚¹æ•°**: iOS/visionOS å†…å­˜å‡å°‘ 50%
  ```javascript
  // è¯·æ±‚ shader-f16 æ”¯æŒ
  const device = await adapter.requestDevice({
    requiredFeatures: ["shader-f16"]
  });
  ```

- **ç“¦ç‰‡å¼æ¸²æŸ“ä¼˜åŒ–**: 
  - åˆå¹¶ç›¸å…³æ“ä½œï¼Œæœ€å°åŒ–æ¸²æŸ“é€šé“è¾¹ç•Œ
  - åˆ©ç”¨ç‰‡ä¸Šå†…å­˜æ•ˆç‡

#### ğŸ§  WebAssembly æ€§èƒ½ä¼˜åŒ–

##### å†…å­˜åˆ†é…å™¨å‡çº§
```bash
# ä½¿ç”¨ mimalloc æ›¿ä»£ dlmalloc
emcc -sMALLOC=mimalloc your_app.c
```

**æ€§èƒ½æå‡æ•°æ®**:
- å•çº¿ç¨‹: 2x æ€§èƒ½æå‡ï¼ˆdlmalloc 2660ms vs mimalloc 1466msï¼‰
- å¤šçº¿ç¨‹: è¿‘ä¹å®Œç¾çš„æ‰©å±•æ€§èƒ½
- å†…å­˜å¯†é›†å‹åº”ç”¨: 10x+ æ€§èƒ½æå‡

##### æ–‡ä»¶ç³»ç»Ÿç°ä»£åŒ–
```bash
# ä½¿ç”¨ WasmFS æ›¿ä»£ JS FS
emcc -sWASMFS your_app.c
```

**WasmFS ä¼˜åŠ¿**:
- pthread æ–‡ä»¶æ“ä½œ: 32x æ€§èƒ½æå‡
- ä¸»çº¿ç¨‹æ“ä½œ: 2x æ€§èƒ½æå‡
- OPFS æ”¯æŒ: ç°ä»£æŒä¹…åŒ–å­˜å‚¨

#### ğŸ”§ è¿›ç¨‹æ¶æ„ä¼˜åŒ–

##### å¤šè¿›ç¨‹é…ç½®è°ƒä¼˜
- **ä¸»è¿›ç¨‹èŒè´£**: UI çº¿ç¨‹ä¸“æ³¨ç”¨æˆ·äº¤äº’
- **æ¸²æŸ“è¿›ç¨‹ä¼˜åŒ–**: ç‹¬ç«‹ GPU ä¸Šä¸‹æ–‡ï¼Œé¿å…é˜»å¡
- **æ²™ç›’æ•ˆç‡**: ç°ä»£åŒ–æ²™ç›’å‡å°‘ IPC å¼€é”€

##### GPU è¿›ç¨‹ç°ä»£åŒ–
- **å‘½ä»¤ç¼“å†²æ± **: å‡å°‘åˆ›å»º/é”€æ¯å¼€é”€
- **çº¹ç†å…±äº«ä¼˜åŒ–**: DMA-BUF é›¶æ‹·è´ä¼ è¾“
- **åŒæ­¥ç‚¹ä¼˜åŒ–**: æ˜¾å¼å›´æ æ”¯æŒ

#### ğŸ’¾ å†…å­˜ç®¡ç†æœ€ä½³å®è·µ

##### å †å†…å­˜ä¼˜åŒ–
```cpp
// CEF åº”ç”¨ä¸­çš„å†…å­˜æ± æ¨¡å¼
class TexturePool {
  std::vector<CefRefPtr<CefTexture>> pool_;
public:
  CefRefPtr<CefTexture> Acquire(int width, int height);
  void Release(CefRefPtr<CefTexture> texture);
};
```

##### V8 ä¼˜åŒ–é…ç½®
```cpp
// V8 å †é™åˆ¶ä¼˜åŒ–
CefSettings settings;
settings.javascript_flags = 
  "--max-old-space-size=4096 "      // 4GB è€ç”Ÿä»£å†…å­˜
  "--max-semi-space-size=256 "      // 256MB æ–°ç”Ÿä»£å†…å­˜
  "--optimize-for-size";            // ä¼˜åŒ–ä»£ç å¤§å°
```

#### ğŸŒ ç½‘ç»œæ€§èƒ½ä¼˜åŒ–

##### HTTP/3 å’Œ QUIC
- **è‡ªåŠ¨åè®®å‡çº§**: å‡å°‘å»¶è¿Ÿ 20-30%
- **å¤šè·¯å¤ç”¨æ”¹è¿›**: æ¶ˆé™¤é˜Ÿå¤´é˜»å¡
- **è¿æ¥è¿ç§»**: ç§»åŠ¨ç½‘ç»œæ— ç¼åˆ‡æ¢

##### èµ„æºåŠ è½½ç­–ç•¥
```cpp
// é¢„åŠ è½½å…³é”®èµ„æº
CefRequestContext::LoadExtension(
  CefString("resource-hint-extension"),
  CefLoadHandler::Create([](bool success) {
    // é¢„è¿æ¥åˆ°å…³é”®åŸŸå
    // é¢„åŠ è½½å…³é”®æ ·å¼è¡¨
  })
);
```

#### ğŸ“Š æ€§èƒ½ç›‘æ§å’Œè°ƒè¯•

##### ç°ä»£è°ƒè¯•å·¥å…·
- **PIX on Windows**: GPU æ€§èƒ½åˆ†æ
  ```bash
  # Chrome å¯åŠ¨å‚æ•°
  --disable-gpu-sandbox 
  --disable-gpu-watchdog 
  --enable-dawn-features=emit_hlsl_debug_symbols
  ```

- **Chrome DevTools WebGPU**: å®æ—¶æ€§èƒ½ç›‘æ§
- **å†…å­˜ä½¿ç”¨è¿½è¸ª**: Process Explorer é›†æˆ

##### æ€§èƒ½æŒ‡æ ‡ç›‘æ§
```javascript
// GPU æ€§èƒ½ç›‘æ§
const adapter = await navigator.gpu.requestAdapter();
const adapterInfo = adapter.info;
console.log(`GPU: ${adapterInfo.vendor} ${adapterInfo.architecture}`);

// æ¸²æŸ“æ—¶é—´æµ‹é‡
const querySet = device.createQuerySet({
  type: 'timestamp',
  count: 2,
});
```

#### ğŸš€ éƒ¨ç½²ä¼˜åŒ–å»ºè®®

##### äºŒè¿›åˆ¶å¤§å°ä¼˜åŒ–
- **Link Time Optimization (LTO)**: å‡å°‘äºŒè¿›åˆ¶å¤§å° 15-25%
- **æ­»ä»£ç æ¶ˆé™¤**: ç§»é™¤æœªä½¿ç”¨çš„ WebGPU åç«¯
- **å‹ç¼©é…ç½®**: Brotli/Gzip ä¼˜åŒ–é™æ€èµ„æº

##### å¯åŠ¨æ€§èƒ½
```cpp
// å»¶è¿Ÿåˆå§‹åŒ–éå…³é”®ç»„ä»¶
CefSettings settings;
settings.background_color = CefColorSetARGB(255, 255, 255, 255);
settings.no_sandbox = true;  // å¼€å‘ç¯å¢ƒå¯é€‰
settings.single_process = false;  // ä¿æŒå¤šè¿›ç¨‹æ¶æ„
```

#### ğŸ¯ å¹³å°ç‰¹å®šä¼˜åŒ–

##### Windows å¹³å°
- **D3D12 åç«¯**: ä¼˜å…ˆä½¿ç”¨ D3D12 è€Œé D3D11
- **MSAA ä¼˜åŒ–**: 4x MSAA å¹³è¡¡è´¨é‡å’Œæ€§èƒ½
- **HDR æ”¯æŒ**: 10-bit é¢œè‰²è¾“å‡º

##### macOS/iOS å¹³å°
- **Metal Performance Shaders**: æœºå™¨å­¦ä¹ å·¥ä½œè´Ÿè½½åŠ é€Ÿ
- **TrueDepth ç›¸æœº**: WebXR/AR åº”ç”¨ä¼˜åŒ–
- **Neural Engine**: AI æ¨ç†åŠ é€Ÿ

##### Linux å¹³å°
- **Vulkan ä¼˜å…ˆ**: ç°ä»£é©±åŠ¨ç¨‹åºæ”¯æŒ
- **Wayland æ˜¾ç¤º**: åˆæˆå™¨ç›´æ¥é›†æˆ
- **Mesa ä¼˜åŒ–**: å¼€æºé©±åŠ¨ç¨‹åºè°ƒä¼˜

#### ğŸ“ˆ æ€§èƒ½åŸºå‡†å’Œç›®æ ‡

##### ç›®æ ‡æ€§èƒ½æŒ‡æ ‡
- **å¯åŠ¨æ—¶é—´**: < 2 ç§’ï¼ˆå†·å¯åŠ¨ï¼‰
- **é¦–æ¬¡ç»˜åˆ¶**: < 100ms
- **GPU å ç”¨ç‡**: > 85%ï¼ˆå›¾å½¢å¯†é›†å‹åº”ç”¨ï¼‰
- **å†…å­˜ä½¿ç”¨**: < è®¾å¤‡å†…å­˜çš„ 30%

##### åŸºå‡†æµ‹è¯•å·¥å…·
- **MotionMark**: WebGPU æ¸²æŸ“æ€§èƒ½
- **WebAssembly åŸºå‡†**: è®¡ç®—æ€§èƒ½
- **Lighthouse**: æ•´ä½“ Web æ€§èƒ½

**ğŸ’¡ å…³é”®å»ºè®®**: ç°ä»£ CEF åº”ç”¨åº”å……åˆ†åˆ©ç”¨ WebGPUã€ç°ä»£ WebAssembly ç‰¹æ€§å’Œå¹³å°ç‰¹å®šä¼˜åŒ–æ¥å®ç°è¿‘åŸç”Ÿçš„æ€§èƒ½è¡¨ç°ã€‚

---

### ğŸ”’ CEF å®‰å…¨æœ€ä½³å®è·µ (2025å¹´)

**åŸºäºç°ä»£å¨èƒæ¨¡å‹å’Œ CEF æœ€æ–°å®‰å…¨ç‰¹æ€§çš„å…¨é¢å®‰å…¨æŒ‡å—**

#### ğŸ›¡ï¸ è¿›ç¨‹éš”ç¦»å’Œæ²™ç›’

##### å¤šè¿›ç¨‹æ¶æ„å®‰å…¨
```cpp
// å¼ºåˆ¶å¯ç”¨å¤šè¿›ç¨‹æ¨¡å¼
CefSettings settings;
settings.single_process = false;  // æ°¸è¿œä¸è¦ä½¿ç”¨å•è¿›ç¨‹æ¨¡å¼
settings.no_sandbox = false;     // ç¡®ä¿æ²™ç›’å¯ç”¨

// é…ç½®è¿›ç¨‹é—´é€šä¿¡å®‰å…¨
settings.command_line_args_disabled = true;  // ç¦ç”¨å‘½ä»¤è¡Œå‚æ•°ä¼ é€’
```

##### æ²™ç›’å¼ºåŒ–é…ç½®
```cpp
// Windows å¹³å°æ²™ç›’é…ç½®
settings.sandbox_info = my_sandbox_info;  // è‡ªå®šä¹‰æ²™ç›’ä¿¡æ¯

// é™åˆ¶æ–‡ä»¶ç³»ç»Ÿè®¿é—®
settings.user_data_path = CefString("safe_app_data");
settings.cache_path = CefString("safe_cache");
```

#### ğŸ” å†…å®¹å®‰å…¨ç­–ç•¥ (CSP)

##### ä¸¥æ ¼çš„ CSP é…ç½®
```html
<!-- æ¨èçš„ CSP å¤´éƒ¨é…ç½® -->
<meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 'self' 'unsafe-inline' 'wasm-unsafe-eval';
  style-src 'self' 'unsafe-inline';
  img-src 'self' data: https:;
  font-src 'self' data:;
  connect-src 'self' https:;
  media-src 'self' https:;
  object-src 'none';
  frame-src 'none';
  base-uri 'self';
  form-action 'self';
">
```

##### CEF åº”ç”¨ CSP å®æ–½
```cpp
// åœ¨èµ„æºå¤„ç†å™¨ä¸­å¼ºåˆ¶ CSP
class SecureResourceHandler : public CefResourceHandler {
public:
  void GetResponseHeaders(CefRefPtr<CefResponse> response, 
                         int64& response_length,
                         CefString& redirectUrl) override {
    CefResponse::HeaderMap headers;
    response->GetHeaderMap(headers);
    
    // å¼ºåˆ¶ CSP
    headers["Content-Security-Policy"] = 
      "default-src 'self'; script-src 'self' 'unsafe-inline' 'wasm-unsafe-eval'";
    
    // å®‰å…¨å¤´éƒ¨
    headers["X-Frame-Options"] = "DENY";
    headers["X-Content-Type-Options"] = "nosniff";
    headers["Referrer-Policy"] = "strict-origin-when-cross-origin";
    
    response->SetHeaderMap(headers);
  }
};
```

#### ğŸŒ ç½‘ç»œå®‰å…¨

##### HTTPS å¼ºåˆ¶å’Œè¯ä¹¦å›ºå®š
```cpp
// é…ç½® HTTPS å¼ºåˆ¶
class SecureRequestHandler : public CefRequestHandler {
public:
  bool OnBeforeResourceLoad(CefRefPtr<CefBrowser> browser,
                           CefRefPtr<CefFrame> frame,
                           CefRefPtr<CefRequest> request,
                           CefRefPtr<CefRequestCallback> callback) override {
    
    CefString url = request->GetURL();
    
    // å¼ºåˆ¶ HTTPS
    if (url.ToString().substr(0, 7) == "http://") {
      std::string https_url = "https://" + url.ToString().substr(7);
      request->SetURL(https_url);
    }
    
    // éªŒè¯å…è®¸çš„åŸŸå
    if (!IsAllowedDomain(url.ToString())) {
      callback->Cancel();
      return true;
    }
    
    return false;
  }
  
private:
  bool IsAllowedDomain(const std::string& url) {
    // å®ç°åŸŸåç™½åå•éªŒè¯
    static const std::vector<std::string> allowed_domains = {
      "yourapp.com", "api.yourapp.com", "cdn.yourapp.com"
    };
    // ... éªŒè¯é€»è¾‘
    return true;
  }
};
```

##### ç°ä»£ TLS é…ç½®
```cpp
// TLS å®‰å…¨é…ç½®
CefSettings settings;
settings.command_line_args = {
  "--ssl-version-min=tls1.2",           // æœ€ä½ TLS 1.2
  "--disable-features=VizDisplayCompositor", // ç¦ç”¨ä¸å¿…è¦ç‰¹æ€§
  "--disable-web-security",             // ä»…å¼€å‘ç¯å¢ƒä½¿ç”¨
  "--cipher-suite-blacklist=0x0004,0x0005"  // ç¦ç”¨å¼±å¯†ç å¥—ä»¶
};
```

#### ğŸ”’ æ•°æ®ä¿æŠ¤

##### æ•æ„Ÿæ•°æ®å¤„ç†
```cpp
// å®‰å…¨çš„ç”¨æˆ·æ•°æ®å­˜å‚¨
class SecureDataManager {
private:
  std::string EncryptData(const std::string& data) {
    // ä½¿ç”¨ AES-256-GCM åŠ å¯†
    // Windows: CryptProtectData
    // macOS: Keychain Services
    // Linux: libsecret
    return encrypted_data;
  }
  
  std::string DecryptData(const std::string& encrypted_data) {
    // ç›¸åº”çš„è§£å¯†é€»è¾‘
    return decrypted_data;
  }
  
public:
  void StoreSecurely(const std::string& key, const std::string& value) {
    std::string encrypted = EncryptData(value);
    // å­˜å‚¨åˆ°å®‰å…¨ä½ç½®
  }
};
```

##### å†…å­˜å®‰å…¨æªæ–½
```cpp
// å®‰å…¨å†…å­˜æ¸…ç†
class SecureString {
private:
  std::vector<char> data_;
  
public:
  ~SecureString() {
    // æ˜¾å¼æ¸…é›¶å†…å­˜
    explicit_bzero(data_.data(), data_.size());
  }
};

// JavaScript å †éš”ç¦»
CefSettings settings;
settings.javascript_flags = 
  "--enable-heap-profiling "          // å¯ç”¨å †åˆ†æ
  "--max-old-space-size=2048 "        // é™åˆ¶å†…å­˜ä½¿ç”¨
  "--enable-pointer-compression";     // å¯ç”¨æŒ‡é’ˆå‹ç¼©
```

#### ğŸ¯ è¾“å…¥éªŒè¯å’Œ XSS é˜²æŠ¤

##### JavaScript Bridge å®‰å…¨
```cpp
// å®‰å…¨çš„ JavaScript ç»‘å®š
class SecureV8Handler : public CefV8Handler {
public:
  bool Execute(const CefString& name,
               CefRefPtr<CefV8Value> object,
               const CefV8ValueList& arguments,
               CefRefPtr<CefV8Value>& retval,
               CefString& exception) override {
    
    if (name == "secureAPI") {
      // ä¸¥æ ¼çš„å‚æ•°éªŒè¯
      if (arguments.size() != 2 || 
          !arguments[0]->IsString() || 
          !arguments[1]->IsObject()) {
        exception = "Invalid arguments";
        return true;
      }
      
      // è¾“å…¥æ¸…ç†å’ŒéªŒè¯
      std::string input = arguments[0]->GetStringValue();
      if (!ValidateInput(input)) {
        exception = "Invalid input format";
        return true;
      }
      
      // å®‰å…¨å¤„ç†
      ProcessSecurely(input);
      retval = CefV8Value::CreateBool(true);
      return true;
    }
    
    return false;
  }
  
private:
  bool ValidateInput(const std::string& input) {
    // å®æ–½ä¸¥æ ¼çš„è¾“å…¥éªŒè¯
    // æ£€æŸ¥é•¿åº¦ã€å­—ç¬¦é›†ã€æ ¼å¼ç­‰
    return true;
  }
};
```

##### DOM XSS é˜²æŠ¤
```javascript
// å®¢æˆ·ç«¯ XSS é˜²æŠ¤å‡½æ•°
function sanitizeInput(input) {
  const div = document.createElement('div');
  div.textContent = input;
  return div.innerHTML;
}

// å®‰å…¨çš„ DOM æ“ä½œ
function updateContent(userInput) {
  const sanitized = sanitizeInput(userInput);
  document.getElementById('content').textContent = sanitized;  // ä½¿ç”¨ textContent
}
```

#### ğŸ” å®‰å…¨ç›‘æ§å’Œæ—¥å¿—

##### å®‰å…¨äº‹ä»¶ç›‘æ§
```cpp
// å®‰å…¨äº‹ä»¶æ—¥å¿—è®°å½•
class SecurityMonitor : public CefLoadHandler {
public:
  void OnLoadError(CefRefPtr<CefBrowser> browser,
                   CefRefPtr<CefFrame> frame,
                   ErrorCode errorCode,
                   const CefString& errorText,
                   const CefString& failedUrl) override {
    
    // è®°å½•å¯ç–‘çš„ç½‘ç»œé”™è¯¯
    if (errorCode == ERR_CERT_INVALID || 
        errorCode == ERR_SSL_PROTOCOL_ERROR) {
      LogSecurityEvent("SSL Error", failedUrl.ToString(), errorCode);
    }
  }
  
private:
  void LogSecurityEvent(const std::string& event_type,
                       const std::string& url,
                       int error_code) {
    // å‘é€åˆ°å®‰å…¨æ—¥å¿—ç³»ç»Ÿ
    // åŒ…æ‹¬æ—¶é—´æˆ³ã€ç”¨æˆ·IDã€è®¾å¤‡æŒ‡çº¹ç­‰
  }
};
```

##### è¿è¡Œæ—¶å®‰å…¨æ£€æŸ¥
```cpp
// å®šæœŸå®‰å…¨æ£€æŸ¥
class SecurityChecker {
public:
  void PerformSecurityCheck() {
    // æ£€æŸ¥è¿›ç¨‹å®Œæ•´æ€§
    if (!VerifyProcessIntegrity()) {
      HandleSecurityBreach();
    }
    
    // æ£€æŸ¥å†…å­˜ä½¿ç”¨å¼‚å¸¸
    if (GetMemoryUsage() > MAX_ALLOWED_MEMORY) {
      HandleMemoryLeak();
    }
    
    // æ£€æŸ¥ç½‘ç»œè¿æ¥
    ValidateNetworkConnections();
  }
  
private:
  bool VerifyProcessIntegrity() {
    // éªŒè¯è¿›ç¨‹ç­¾åå’Œæƒé™
    return true;
  }
  
  void HandleSecurityBreach() {
    // å®‰å…¨äº‹ä»¶å“åº”
    // 1. è®°å½•è¯¦ç»†æ—¥å¿—
    // 2. é€šçŸ¥ç®¡ç†å‘˜
    // 3. é‡‡å–é˜²æŠ¤æªæ–½
  }
};
```

#### ğŸ”„ æ›´æ–°å’Œè¡¥ä¸ç®¡ç†

##### è‡ªåŠ¨æ›´æ–°å®‰å…¨
```cpp
// å®‰å…¨çš„è‡ªåŠ¨æ›´æ–°æœºåˆ¶
class SecureUpdater {
public:
  bool CheckForUpdates() {
    // 1. ä½¿ç”¨ HTTPS æ£€æŸ¥æ›´æ–°
    // 2. éªŒè¯æ•°å­—ç­¾å
    // 3. æ£€æŸ¥ç‰ˆæœ¬å›æ»šæ”»å‡»
    
    std::string update_url = "https://updates.yourapp.com/check";
    CefRefPtr<CefRequest> request = CefRequest::Create();
    request->SetURL(update_url);
    
    // æ·»åŠ è®¤è¯å¤´
    CefRequest::HeaderMap headers;
    headers["Authorization"] = "Bearer " + GetSecureToken();
    headers["User-Agent"] = GetSecureUserAgent();
    request->SetHeaderMap(headers);
    
    return ProcessUpdateResponse(request);
  }
  
private:
  bool VerifyUpdateSignature(const std::string& update_data,
                           const std::string& signature) {
    // ä½¿ç”¨å…¬é’¥éªŒè¯æ•°å­—ç­¾å
    return true;
  }
};
```

#### ğŸ“± ç§»åŠ¨å¹³å°å®‰å…¨

##### Android ç‰¹å®šå®‰å…¨æªæ–½
```cpp
// Android WebView å®‰å…¨é…ç½®
#ifdef ANDROID
void ConfigureAndroidSecurity(CefSettings& settings) {
  // ç¦ç”¨æ–‡ä»¶ç³»ç»Ÿè®¿é—®
  settings.command_line_args.push_back("--disable-file-system");
  
  // å¯ç”¨ä¸¥æ ¼ç«™ç‚¹éš”ç¦»
  settings.command_line_args.push_back("--site-per-process");
  
  // ç¦ç”¨ä¸å®‰å…¨çš„åè®®
  settings.command_line_args.push_back("--disable-features=InsecureOriginWarnings");
}
#endif
```

#### ğŸ¯ å¨èƒå»ºæ¨¡å’Œé£é™©è¯„ä¼°

##### å¸¸è§å¨èƒå‘é‡
1. **ä»£ç æ³¨å…¥æ”»å‡»**: XSSã€SQL æ³¨å…¥ã€å‘½ä»¤æ³¨å…¥
2. **ä¸­é—´äººæ”»å‡»**: TLS é™çº§ã€è¯ä¹¦ä¼ªé€ 
3. **æœ¬åœ°æ–‡ä»¶åŒ…å«**: è·¯å¾„éå†ã€æ–‡ä»¶è¯»å–
4. **å†…å­˜å®‰å…¨**: ç¼“å†²åŒºæº¢å‡ºã€UAF æ¼æ´
5. **ä¾›åº”é“¾æ”»å‡»**: ç¬¬ä¸‰æ–¹åº“ã€ä¾èµ–æ±¡æŸ“

##### é˜²æŠ¤ç­–ç•¥çŸ©é˜µ
| å¨èƒç±»å‹ | é˜²æŠ¤æªæ–½ | å®æ–½ä¼˜å…ˆçº§ |
|---------|---------|-----------|
| XSS | CSP + è¾“å…¥éªŒè¯ | é«˜ |
| MITM | è¯ä¹¦å›ºå®š + HSTS | é«˜ |
| æ–‡ä»¶åŒ…å« | æ²™ç›’ + è·¯å¾„éªŒè¯ | ä¸­ |
| å†…å­˜å®‰å…¨ | ASLR + CFI | ä¸­ |
| ä¾›åº”é“¾ | ç­¾åéªŒè¯ + SCA | é«˜ |

**ğŸš¨ å…³é”®æé†’**: å®‰å…¨æ˜¯æŒç»­è¿‡ç¨‹ï¼Œéœ€è¦å®šæœŸæ›´æ–°å¨èƒæ¨¡å‹ã€è¿›è¡Œå®‰å…¨å®¡è®¡å’Œæ¸—é€æµ‹è¯•ã€‚åŠ¡å¿…å…³æ³¨ CEF å®˜æ–¹å®‰å…¨å…¬å‘Šå’Œ CVE æ•°æ®åº“ã€‚

---

## CEF Build
-----------------
å¦‚æœè¦ç¼–è¯‘CEFï¼Œåˆ™éœ€è¦åŒæ­¥ç¼–è¯‘Chromiumçš„æœ€æ–°æºç 
- [Chromium Build Guid](https://github.com/fanfeilong/cefutil/blob/master/doc/chromium_build_guid.md)
- [Chromium for developer](http://www.chromium.org/developers)
- [windows build instructions](https://chromium.googlesource.com/chromium/src/+/master/docs/windows_build_instructions.md)
  - **å®˜æ–¹ depot_tools ä»“åº“**: https://chromium.googlesource.com/chromium/tools/depot_tools.git
  - **ç³»ç»Ÿè¦æ±‚**: Python 3.8+ (depot_tools ä¼šè‡ªåŠ¨ç®¡ç† Python ç¯å¢ƒ)
  - **è‡ªåŠ¨æ›´æ–°**: è¿è¡Œ `gclient` æ—¶ä¼šè‡ªåŠ¨æ›´æ–° depot_tools
  - **åŒ…å«å·¥å…·**: GNã€autoninjaã€sisoã€ninja ç­‰æœ€æ–°æ„å»ºå·¥å…·
  - å¦‚é‡ç½‘ç»œé—®é¢˜ï¼Œå¯æœç´¢ GitHub ä¸Šçš„é•œåƒä»“åº“ï¼š[depot_tools mirrors](https://github.com/search?q=depot_tools)
  - google å®˜æ–¹å¼€å‘çš„vsæ’ä»¶ï¼Œä¸“é—¨ä¸ºchromiumæºç æä¾›çš„ã€‚[vs-chromium](https://github.com/chromium/vs-chromium)
  - åŒæ ·çš„åŸå› ï¼Œdepot_toolé‡Œå†…ç½®çš„chromiumçš„æºç ä¸‹è½½åœ°å€æ”¾åœ¨googleapi.comä¸Šï¼Œä¹Ÿæ˜¯è¢«å¢™çš„ã€‚ä¸‹é¢è¿™ä¸ªåœ°å€é‡Œæœ‰chromiumçš„æ‰€æœ‰é¡¹ç›®çš„gitåœ°å€ï¼š
    - https://chromium.googlesource.com/?format=JSON
    - https://chromium.googlesource.com/?format=TEXT

ç›¸å…³é“¾æ¥
---------
- [servo, the embeddable browser engine](http://blogs.s-osg.org/servo-the-embeddable-browser-engine/)

- [geckoview](https://mozilla.github.io/geckoview/)
Android offers a built-in WebView, which applications can hook into in order to display web pages within the context of their app. However, Android's WebView is not really intended for building browsers, and hence, many advanced Web APIs are disabled. Furthermore, it is also a moving target: different phones might have different versions of WebView, all of which your app has to support.

That is where GeckoView comes in. GeckoView is:

* Full-featured: GeckoView is designed to expose the entire power of the Web to applications, and all that through a straightforward API. Think of it as harnessing the full power of Gecko (the engine that powers Firefox), while its API is WebView-like and easy to use.
* Suited for apps and browsers: GeckoView is particularly suited for building mobile browsers, but it can be embedded as a web engine component in any kind of app.
* Self-Contained: Because GeckoView is a standalone library that you bundle with your application, you can be confident that the code you test is the code that will actually run.
* Standards Compliant: Like Firefox, GeckoView offers excellent support for modern Web standards.

---

### ğŸŒ CEF å¤šå¹³å°æ”¯æŒæŒ‡å— (2025å¹´)

**å…¨é¢è¦†ç›– Windowsã€macOSã€Linuxã€Android å’Œ iOS å¹³å°çš„ç°ä»£å¼€å‘æŒ‡å—**

#### ğŸªŸ Windows å¹³å°

##### å¼€å‘ç¯å¢ƒé…ç½®
```cmd
# æ¨èçš„ Windows å¼€å‘ç¯å¢ƒ
Visual Studio 2022 Community/Professional
Windows 11 SDK (10.0.22621.0 æˆ–æ›´æ–°)
Windows 10 version 1903+ æˆ– Windows 11
```

##### Windows ç‰¹å®šä¼˜åŒ–
```cpp
// Windows å¹³å°é…ç½®
#ifdef _WIN32
void ConfigureWindowsPlatform(CefSettings& settings) {
  // å¯ç”¨ DirectComposition
  settings.command_line_args.push_back("--enable-direct-composition");
  
  // D3D12 æ¸²æŸ“å™¨
  settings.command_line_args.push_back("--use-d3d12");
  
  // é«˜ DPI æ”¯æŒ
  settings.command_line_args.push_back("--enable-high-dpi-support");
  settings.command_line_args.push_back("--force-device-scale-factor=1.0");
  
  // Windows 11 ç‰¹æ€§
  settings.command_line_args.push_back("--enable-features=WebGPU");
}
#endif
```

##### Windows WebView2 å…¼å®¹æ€§
```cpp
// WebView2 è¿ç§»å…¼å®¹å±‚
class CEFWebView2Bridge {
public:
  // æä¾›ç±»ä¼¼ WebView2 çš„ API
  void NavigateToUrl(const std::wstring& url) {
    if (cef_browser_) {
      cef_browser_->GetMainFrame()->LoadURL(url);
    }
  }
  
  void SetPermissionRequestHandler(
    std::function<void(const std::string&)> handler) {
    permission_handler_ = handler;
  }
};
```

#### ğŸ macOS å¹³å°

##### å¼€å‘ç¯å¢ƒè¦æ±‚
```bash
# macOS å¼€å‘ç¯å¢ƒ
macOS 12.0 (Monterey) æˆ–æ›´æ–°ç‰ˆæœ¬
Xcode 14.0 æˆ–æ›´æ–°ç‰ˆæœ¬
Command Line Tools for Xcode
```

##### macOS ç‰¹å®šåŠŸèƒ½
```objc
// macOS å¹³å°é…ç½®
#ifdef __APPLE__
void ConfigureMacOSPlatform(CefSettings& settings) {
  // Metal æ¸²æŸ“å™¨
  settings.command_line_args.push_back("--use-metal");
  
  // Core Animation æ”¯æŒ
  settings.command_line_args.push_back("--enable-core-animation-api");
  
  // macOS æ²™ç›’å…¼å®¹
  settings.command_line_args.push_back("--enable-sandbox-logging");
  
  // Retina æ˜¾ç¤ºæ”¯æŒ
  settings.device_scale_factor = 2.0;
}

// NSView é›†æˆ
@interface CEFNSView : NSView
- (void)embedCEFBrowser:(CefRefPtr<CefBrowser>)browser;
@end
#endif
```

##### App Store éƒ¨ç½²
```objc
// App Store å…¼å®¹é…ç½®
void ConfigureAppStoreCompatibility(CefSettings& settings) {
  // ç¦ç”¨æ²™ç›’å¤–åŠŸèƒ½
  settings.no_sandbox = false;
  settings.single_process = false;
  
  // ä½¿ç”¨åº”ç”¨ç¨‹åºå®¹å™¨
  NSString* containerPath = [[NSHomeDirectory() 
    stringByAppendingPathComponent:@"Library"]
    stringByAppendingPathComponent:@"Containers"];
  
  settings.user_data_path = [containerPath UTF8String];
}
```

#### ğŸ§ Linux å¹³å°

##### å‘è¡Œç‰ˆæ”¯æŒ
```bash
# æ”¯æŒçš„ Linux å‘è¡Œç‰ˆ
Ubuntu 20.04 LTS, 22.04 LTS, 24.04 LTS
Debian 11, 12
CentOS 8, 9
Fedora 36+
Arch Linux (rolling)
```

##### Linux æ„å»ºé…ç½®
```cpp
// Linux å¹³å°é…ç½®
#ifdef __linux__
void ConfigureLinuxPlatform(CefSettings& settings) {
  // Wayland æ”¯æŒ
  settings.command_line_args.push_back("--enable-features=UseOzonePlatform");
  settings.command_line_args.push_back("--ozone-platform=wayland");
  
  // Vulkan æ¸²æŸ“å™¨
  settings.command_line_args.push_back("--enable-vulkan");
  
  // å­—ä½“é…ç½®
  settings.command_line_args.push_back("--force-color-profile=srgb");
}
#endif
```

##### ä¾èµ–åŒ…ç®¡ç†
```bash
# Ubuntu/Debian ä¾èµ–
apt-get install libnss3-dev libgconf-2-4 libxrandr2 \
  libasound2-dev libpangocairo-1.0-0 libatk1.0-0 \
  libcairo-gobject2 libgtk-3-0 libgdk-pixbuf2.0-0

# Fedora ä¾èµ–
dnf install nss-devel gtk3-devel alsa-lib-devel \
  libXrandr-devel libXcomposite-devel libXcursor-devel

# Arch Linux ä¾èµ–
pacman -S gtk3 nss alsa-lib libxrandr libxcomposite libxcursor
```

#### ğŸ“± Android å¹³å°

##### Android Studio é…ç½®
```gradle
// app/build.gradle
android {
    compileSdk 34
    
    defaultConfig {
        minSdk 21  // CEF Android æœ€ä½è¦æ±‚
        targetSdk 34
        ndk {
            abiFilters 'arm64-v8a', 'armeabi-v7a', 'x86_64'
        }
    }
    
    buildFeatures {
        prefab true
    }
}

dependencies {
    implementation 'org.chromium.net:cronet-api:119.6045.31'
    implementation 'org.chromium.net:cronet-common:119.6045.31'
}
```

##### JNI é›†æˆ
```cpp
// Android JNI æ¡¥æ¥
#ifdef ANDROID
extern "C" JNIEXPORT void JNICALL
Java_com_yourapp_cef_CefManager_initializeCef(
    JNIEnv* env,
    jobject thiz,
    jstring app_data_path) {
    
  CefSettings settings;
  
  // Android ç‰¹å®šé…ç½®
  settings.command_line_args.push_back("--use-vulkan");
  settings.command_line_args.push_back("--enable-gpu-rasterization");
  
  // è·å–åº”ç”¨æ•°æ®è·¯å¾„
  const char* path = env->GetStringUTFChars(app_data_path, nullptr);
  settings.user_data_path = CefString(path);
  env->ReleaseStringUTFChars(app_data_path, path);
  
  CefInitialize(settings, nullptr, nullptr);
}
#endif
```

##### Kotlin å°è£…
```kotlin
// CEF Android Kotlin å°è£…
class CefWebView @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null,
    defStyleAttr: Int = 0
) : FrameLayout(context, attrs, defStyleAttr) {
    
    private var cefBrowser: Long = 0
    
    fun loadUrl(url: String) {
        CefManager.loadUrl(cefBrowser, url)
    }
    
    fun evaluateJavaScript(script: String, callback: (String) -> Unit) {
        CefManager.evaluateJavaScript(cefBrowser, script) { result ->
            Handler(Looper.getMainLooper()).post {
                callback(result)
            }
        }
    }
}
```

#### ğŸ“± iOS å¹³å° (å®éªŒæ€§æ”¯æŒ)

##### iOS é›†æˆé…ç½®
```swift
// iOS CEF é›†æˆ (åŸºäº WKWebView æ¡¥æ¥)
import WebKit
import UIKit

class CEFWebView: UIView {
    private var webView: WKWebView!
    
    override func awakeFromNib() {
        super.awakeFromNib()
        setupWebView()
    }
    
    private func setupWebView() {
        let config = WKWebViewConfiguration()
        
        // CEF å…¼å®¹å±‚
        config.preferences.setValue(true, forKey: "allowFileAccessFromFileURLs")
        config.setValue(true, forKey: "allowUniversalAccessFromFileURLs")
        
        webView = WKWebView(frame: bounds, configuration: config)
        addSubview(webView)
        
        // è‡ªåŠ¨å¸ƒå±€
        webView.translatesAutoresizingMaskIntoConstraints = false
        NSLayoutConstraint.activate([
            webView.topAnchor.constraint(equalTo: topAnchor),
            webView.leadingAnchor.constraint(equalTo: leadingAnchor),
            webView.trailingAnchor.constraint(equalTo: trailingAnchor),
            webView.bottomAnchor.constraint(equalTo: bottomAnchor)
        ])
    }
}
```

#### ğŸ”§ è·¨å¹³å°æ„å»ºç³»ç»Ÿ

##### CMake é…ç½®
```cmake
# è·¨å¹³å° CMakeLists.txt
cmake_minimum_required(VERSION 3.21)
project(CEFMultiPlatform)

# CEF æŸ¥æ‰¾
find_package(CEF REQUIRED)

# å¹³å°ç‰¹å®šæºæ–‡ä»¶
if(WIN32)
    set(PLATFORM_SOURCES src/windows/platform_win.cpp)
    set(PLATFORM_LIBS d3d11 dxgi)
elseif(APPLE)
    if(IOS)
        set(PLATFORM_SOURCES src/ios/platform_ios.mm)
        find_library(WEBKIT_FRAMEWORK WebKit)
        set(PLATFORM_LIBS ${WEBKIT_FRAMEWORK})
    else()
        set(PLATFORM_SOURCES src/macos/platform_mac.mm)
        find_library(METAL_FRAMEWORK Metal)
        set(PLATFORM_LIBS ${METAL_FRAMEWORK})
    endif()
elseif(ANDROID)
    set(PLATFORM_SOURCES src/android/platform_android.cpp)
    set(PLATFORM_LIBS log android)
else()
    set(PLATFORM_SOURCES src/linux/platform_linux.cpp)
    find_package(PkgConfig REQUIRED)
    pkg_check_modules(GTK3 REQUIRED gtk+-3.0)
    set(PLATFORM_LIBS ${GTK3_LIBRARIES})
endif()

# ç›®æ ‡é…ç½®
add_executable(${PROJECT_NAME} 
    src/main.cpp 
    src/common/app.cpp
    ${PLATFORM_SOURCES}
)

target_link_libraries(${PROJECT_NAME} 
    ${CEF_LIBRARIES} 
    ${PLATFORM_LIBS}
)
```

##### æ¡ä»¶ç¼–è¯‘ç®¡ç†
```cpp
// platform_config.h - å¹³å°é…ç½®ç»Ÿä¸€ç®¡ç†
#pragma once

// å¹³å°æ£€æµ‹
#if defined(_WIN32)
    #define PLATFORM_WINDOWS 1
    #include "windows/platform_specific.h"
#elif defined(__APPLE__)
    #include <TargetConditionals.h>
    #if TARGET_OS_IPHONE
        #define PLATFORM_IOS 1
        #include "ios/platform_specific.h"
    #else
        #define PLATFORM_MACOS 1
        #include "macos/platform_specific.h"
    #endif
#elif defined(ANDROID)
    #define PLATFORM_ANDROID 1
    #include "android/platform_specific.h"
#elif defined(__linux__)
    #define PLATFORM_LINUX 1
    #include "linux/platform_specific.h"
#endif

// è·¨å¹³å°æŠ½è±¡æ¥å£
class PlatformInterface {
public:
    virtual ~PlatformInterface() = default;
    virtual void InitializePlatform() = 0;
    virtual void ShutdownPlatform() = 0;
    virtual void* GetNativeWindowHandle() = 0;
    
    static std::unique_ptr<PlatformInterface> Create();
};
```

#### ğŸ“¦ åŒ…ç®¡ç†å’Œåˆ†å‘

##### Windows åˆ†å‘
```xml
<!-- Package.appxmanifest for MSIX -->
<Package xmlns="http://schemas.microsoft.com/appx/manifest/foundation/windows10">
  <Identity Name="YourApp.CEF" 
            Publisher="CN=YourCompany" 
            Version="1.0.0.0" />
  
  <Properties>
    <DisplayName>Your CEF Application</DisplayName>
    <PublisherDisplayName>Your Company</PublisherDisplayName>
    <Description>CEF-based application</Description>
  </Properties>
  
  <Applications>
    <Application Id="YourApp" 
                 Executable="YourApp.exe" 
                 EntryPoint="YourApp.App">
      <uap:VisualElements DisplayName="Your CEF App"
                         Square150x150Logo="Assets/Square150x150Logo.png"
                         Square44x44Logo="Assets/Square44x44Logo.png"
                         BackgroundColor="transparent" />
    </Application>
  </Applications>
</Package>
```

##### macOS åˆ†å‘
```bash
# macOS åº”ç”¨ç¨‹åºåŒ…ç»“æ„
YourApp.app/
â”œâ”€â”€ Contents/
â”‚   â”œâ”€â”€ Info.plist
â”‚   â”œâ”€â”€ MacOS/
â”‚   â”‚   â””â”€â”€ YourApp
â”‚   â”œâ”€â”€ Resources/
â”‚   â”‚   â””â”€â”€ icon.icns
â”‚   â””â”€â”€ Frameworks/
â”‚       â””â”€â”€ Chromium Embedded Framework.framework/

# ä»£ç ç­¾å
codesign --force --deep --sign "Developer ID Application" YourApp.app
```

##### Linux åˆ†å‘
```bash
# AppImage æ‰“åŒ…
linuxdeploy --appdir AppDir --executable YourApp --output appimage

# Flatpak é…ç½®
flatpak-builder build com.yourcompany.YourApp.yml
flatpak build-export repo build

# Snap é…ç½®
snapcraft
```

#### ğŸ”„ æŒç»­é›†æˆ/æŒç»­éƒ¨ç½²

##### GitHub Actions å¤šå¹³å°æ„å»º
```yaml
# .github/workflows/multi-platform.yml
name: Multi-Platform Build

on: [push, pull_request]

jobs:
  build:
    strategy:
      matrix:
        include:
          - os: windows-latest
            target: windows-x64
          - os: macos-latest
            target: macos-universal
          - os: ubuntu-latest
            target: linux-x64
          - os: ubuntu-latest
            target: android-arm64
    
    runs-on: ${{ matrix.os }}
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Setup Build Environment
      run: |
        if [ "${{ matrix.target }}" == "android-arm64" ]; then
          echo "Setup Android NDK"
        fi
    
    - name: Build CEF Application
      run: |
        mkdir build && cd build
        cmake .. -DTARGET_PLATFORM=${{ matrix.target }}
        cmake --build . --config Release
    
    - name: Package Application
      run: |
        # å¹³å°ç‰¹å®šçš„æ‰“åŒ…é€»è¾‘
        if [ "${{ runner.os }}" == "Windows" ]; then
          echo "Create MSIX package"
        elif [ "${{ runner.os }}" == "macOS" ]; then
          echo "Create DMG package"
        else
          echo "Create AppImage package"
        fi
```

#### ğŸ“Š å¹³å°å…¼å®¹æ€§çŸ©é˜µ

| ç‰¹æ€§ | Windows | macOS | Linux | Android | iOS |
|------|---------|--------|-------|---------|-----|
| CEF æ ¸å¿ƒ | âœ… | âœ… | âœ… | âœ… | âš ï¸ |
| WebGPU | âœ… | âœ… | âœ… | âœ… | âŒ |
| ç¡¬ä»¶åŠ é€Ÿ | âœ… | âœ… | âœ… | âœ… | âœ… |
| æ–‡ä»¶ç³»ç»Ÿè®¿é—® | âœ… | âš ï¸ | âœ… | âš ï¸ | âŒ |
| å¤šè¿›ç¨‹ | âœ… | âœ… | âœ… | âš ï¸ | âŒ |
| è‡ªå®šä¹‰åè®® | âœ… | âœ… | âœ… | âœ… | âš ï¸ |

**å›¾ä¾‹**: âœ… å®Œå…¨æ”¯æŒ, âš ï¸ éƒ¨åˆ†æ”¯æŒ/æœ‰é™åˆ¶, âŒ ä¸æ”¯æŒ

#### ğŸš€ æœ€ä½³å®è·µå»ºè®®

##### ä»£ç ç»„ç»‡
```cpp
// æ¨èçš„é¡¹ç›®ç»“æ„
project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ common/          // è·¨å¹³å°å…¬å…±ä»£ç 
â”‚   â”œâ”€â”€ platform/        // å¹³å°ç‰¹å®šä»£ç 
â”‚   â”‚   â”œâ”€â”€ windows/
â”‚   â”‚   â”œâ”€â”€ macos/
â”‚   â”‚   â”œâ”€â”€ linux/
â”‚   â”‚   â””â”€â”€ android/
â”‚   â””â”€â”€ app/             // åº”ç”¨ç¨‹åºé€»è¾‘
â”œâ”€â”€ resources/           // è·¨å¹³å°èµ„æº
â”œâ”€â”€ cmake/               // æ„å»ºé…ç½®
â””â”€â”€ docs/                // å¹³å°ç‰¹å®šæ–‡æ¡£
```

##### æ€§èƒ½ä¼˜åŒ–å»ºè®®
1. **æ¸²æŸ“åç«¯é€‰æ‹©**: Windows (D3D12) > macOS (Metal) > Linux (Vulkan)
2. **å†…å­˜ç®¡ç†**: å„å¹³å°ä½¿ç”¨åŸç”Ÿå†…å­˜åˆ†é…å™¨
3. **æ–‡ä»¶ I/O**: åˆ©ç”¨å¹³å°ç‰¹å®šçš„å¼‚æ­¥ I/O API
4. **ç½‘ç»œä¼˜åŒ–**: HTTP/3 å’Œ QUIC åœ¨æ‰€æœ‰å¹³å°å¯ç”¨

**ğŸŒŸ é‡è¦æç¤º**: ç°ä»£ CEF æä¾›äº†å‡ºè‰²çš„è·¨å¹³å°ä¸€è‡´æ€§ï¼Œä½†å……åˆ†åˆ©ç”¨å¹³å°ç‰¹å®šä¼˜åŒ–èƒ½æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒã€‚å»ºè®®é‡‡ç”¨"é€šç”¨æ ¸å¿ƒ + å¹³å°ä¼˜åŒ–"çš„æ¶æ„æ¨¡å¼ã€‚

---
